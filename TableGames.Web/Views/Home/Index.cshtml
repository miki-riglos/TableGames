@{
    ViewBag.Title = "Home";
}

<div class="row">
    <div class="col-sm-6">
        <!-- User Player -->
        <div data-bind="if: userPlayer">
            <div class="list-group" data-bind="with: userPlayer">
                <div class="list-group-item tg-player">
                    <div data-bind="text: name"></div>
                    <div class="tg-player-rooms" data-bind="foreach: rooms">
                        <div>
                            <span data-bind="text: name"></span>(<span data-bind="text: attendance"></span>)
                            <button type="button" class="btn btn-danger btn-xs" data-bind="click: $root.removeRoom">Remove</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Add Room -->
            <div class="form-inline">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="New Room" data-bind="value: roomToAdd, enable: authentication.isLoggedIn(), onEnter: addRoom" />
                </div>
                <button type="button" class="btn btn-default" data-bind="click: addRoom">Add</button>
            </div>
        </div>

        <!-- Other Players -->
        <div class="list-group" data-bind="foreach: otherPlayers">
            <div class="list-group-item tg-player">
                <div data-bind="text: name"></div>
                <div class="tg-player-rooms" data-bind="foreach: rooms">
                    <div>
                        <span data-bind="text: name"></span>(<span data-bind="text: attendance"></span>)
                        <button type="button" class="btn btn-primary btn-xs" data-bind="click: $root.enterRoom">Enter</button>
                        <button type="button" class="btn btn-primary btn-xs" data-bind="click: $root.leaveRoom">Leave</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-sm-6">
        <!-- Other Players -->
        <div data-bind="foreach: notification.messages">
            <div class="tg-notification">
                <span data-bind="text: type"></span>:<span data-bind="text: message"></span>
            </div>
        </div>
    </div>
</div>


<!-- Chat -->
<div>
    <div class="form-inline">
        <div class="form-group">
            <input type="text" class="form-control" placeholder="Message" data-bind="value: chat.messageToSend, enable: authentication.isLoggedIn, onEnter: sendMessage" />
        </div>
        <button type="button" class="btn btn-default" data-bind="click: sendMessage">Send</button>
    </div>

    <div data-bind="foreach: chat.messages">
        <div class="tg-message">
            <span data-bind="text: userName"></span>:<span data-bind="text: message"></span>
        </div>
    </div>
</div>


@section scripts {
    <script type="text/javascript" src="~/Scripts/require.js" data-main="@Url.Content("~/TG.Scripts/main")"></script>
}
