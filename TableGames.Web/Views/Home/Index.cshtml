@{
    ViewBag.Title = "Home";
}

<div class="row">
    <div class="col-sm-6">
        <div class="form-inline">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="New Room" data-bind="value: roomToAdd, enable: authentication.isLoggedIn(), onEnter: addRoom" />
            </div>
            <button type="button" class="btn btn-default" data-bind="click: addRoom">Add</button>
        </div>

        <div data-bind="foreach: players">
            <span data-bind="text: name"></span>
            <ul data-bind="foreach: rooms">
                <li>
                    <span data-bind="text: name"></span>(<span data-bind="text: attendance"></span>)
                    <button type="button" class="btn btn-danger" data-bind="click: $root.removeRoom, visible: $root.removeRoom.isAllowed($data)">Remove</button>
                    <button type="button" class="btn btn-primary" data-bind="click: $root.enterRoom">Enter</button>
                    <button type="button" class="btn btn-primary" data-bind="click: $root.leaveRoom">Leave</button>
                </li>
            </ul>
        </div>
    </div>
    <div class="col-sm-6">
        <ul data-bind="foreach: notification.messages">
            <li>
                <span data-bind="text: type"></span>:<span data-bind="text: message"></span>
            </li>
        </ul>
    </div>
</div>


<div class="form-inline">
    <div class="form-group">
        <input type="text" class="form-control" placeholder="Message" data-bind="value: chat.messageToSend, enable: authentication.isLoggedIn, onEnter: sendMessage" />
    </div>
    <button type="button" class="btn btn-default" data-bind="click: sendMessage">Send</button>
</div>

<ul data-bind="foreach: chat.messages">
    <li>
        <span data-bind="text: userName"></span>:<span data-bind="text: message"></span>
    </li>
</ul>


@section scripts {
    <script type="text/javascript" src="~/Scripts/require.js" data-main="@Url.Content("~/TG.Scripts/main")"></script>
}
